{"version":3,"file":"jsfitsio.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,IAA0C;AAChD;AACA,GAAG,iCAAO,CAAC,OAAS,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC/B,IAAI,KAAK,EAMN;AACH,EAAE;AACF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,WAAW;;;AAGf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;AAEzC,eAAe;AACf,kDAAkD;AAClD,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB,gDAAgD;AAChD,8BAA8B;;AAE9B;AACA;AACA;AACA;;AAEA,sCAAsC;AACtC,2BAA2B;AAC3B;AACA,MAAM,uCAAuC;AAC7C;AACA,MAAM,uCAAuC;AAC7C;AACA;AACA,MAAM,uCAAuC;AAC7C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yCAAyC,SAAS;AAClD;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,WAAW;AACzC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,MAAM,WAAW;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,2DAA2D;AAC3D,wCAAwC;AACxC,0BAA0B;AAC1B,gCAAgC,EAAE;AAClC,gDAAgD;AAChD,6FAA6F;AAC7F,mDAAmD;AACnD,UAAU;AACV;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,MAAM;AACN;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;A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AS,CAAC;QACtD,IAAI,CAAC,QAAQ,GAAG,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;IAC9D,CAAC;IAED,IAAI,GAAG;QACL,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAED,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;CACF;;;;;;;UC/BD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,0CAA0C,wKAAwK;WAClN;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCzCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrF2D;AACR;AAKN;AACA;AACE;AACE;AACJ","sources":["webpack://jsfitsio/webpack/universalModuleDefinition","webpack://jsfitsio/./node_modules/blob-polyfill/Blob.js","webpack://jsfitsio/./src/FITSParser.ts","webpack://jsfitsio/./src/FITSWriter.ts","webpack://jsfitsio/./src/ParseHeader.ts","webpack://jsfitsio/./src/ParsePayload.ts","webpack://jsfitsio/./src/ParseUtils.ts","webpack://jsfitsio/./src/model/FITSHeader.ts","webpack://jsfitsio/./src/model/FITSHeaderItem.ts","webpack://jsfitsio/webpack/bootstrap","webpack://jsfitsio/webpack/runtime/compat get default export","webpack://jsfitsio/webpack/runtime/define property getters","webpack://jsfitsio/webpack/runtime/ensure chunk","webpack://jsfitsio/webpack/runtime/get javascript chunk filename","webpack://jsfitsio/webpack/runtime/global","webpack://jsfitsio/webpack/runtime/hasOwnProperty shorthand","webpack://jsfitsio/webpack/runtime/load script","webpack://jsfitsio/webpack/runtime/make namespace object","webpack://jsfitsio/webpack/runtime/publicPath","webpack://jsfitsio/webpack/runtime/jsonp chunk loading","webpack://jsfitsio/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"jsfitsio\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jsfitsio\"] = factory();\n\telse\n\t\troot[\"jsfitsio\"] = factory();\n})(self, () => {\nreturn ","/* Blob.js\n * A Blob, File, FileReader & URL implementation.\n * 2020-02-01\n *\n * By Eli Grey, https://eligrey.com\n * By Jimmy Wärting, https://github.com/jimmywarting\n * License: MIT\n *   See https://github.com/eligrey/Blob.js/blob/master/LICENSE.md\n */\n\n(function(global) {\n\t(function (factory) {\n\t\tif (typeof define === \"function\" && define.amd) {\n\t\t\t// AMD. Register as an anonymous module.\n\t\t\tdefine([\"exports\"], factory);\n\t\t} else if (typeof exports === \"object\" && typeof exports.nodeName !== \"string\") {\n\t\t\t// CommonJS\n\t\t\tfactory(exports);\n\t\t} else {\n\t\t\t// Browser globals\n\t\t\tfactory(global);\n\t\t}\n\t})(function (exports) {\n\t\t\"use strict\";\n\n\t\tvar BlobBuilder = global.BlobBuilder\n\t\t\t|| global.WebKitBlobBuilder\n\t\t\t|| global.MSBlobBuilder\n\t\t\t|| global.MozBlobBuilder;\n\n\t\tvar URL = global.URL || global.webkitURL || function (href, a) {\n\t\t\ta = document.createElement(\"a\");\n\t\t\ta.href = href;\n\t\t\treturn a;\n\t\t};\n\n\t\tvar origBlob = global.Blob;\n\t\tvar createObjectURL = URL.createObjectURL;\n\t\tvar revokeObjectURL = URL.revokeObjectURL;\n\t\tvar strTag = global.Symbol && global.Symbol.toStringTag;\n\t\tvar blobSupported = false;\n\t\tvar blobSupportsArrayBufferView = false;\n\t\tvar blobBuilderSupported = BlobBuilder\n\t\t\t&& BlobBuilder.prototype.append\n\t\t\t&& BlobBuilder.prototype.getBlob;\n\n\t\ttry {\n\t\t\t// Check if Blob constructor is supported\n\t\t\tblobSupported = new Blob([\"ä\"]).size === 2;\n\n\t\t\t// Check if Blob constructor supports ArrayBufferViews\n\t\t\t// Fails in Safari 6, so we need to map to ArrayBuffers there.\n\t\t\tblobSupportsArrayBufferView = new Blob([new Uint8Array([1, 2])]).size === 2;\n\t\t} catch (e) {/**/}\n\n\n\t\t// Helper function that maps ArrayBufferViews to ArrayBuffers\n\t\t// Used by BlobBuilder constructor and old browsers that didn't\n\t\t// support it in the Blob constructor.\n\t\tfunction mapArrayBufferViews (ary) {\n\t\t\treturn ary.map(function (chunk) {\n\t\t\t\tif (chunk.buffer instanceof ArrayBuffer) {\n\t\t\t\t\tvar buf = chunk.buffer;\n\n\t\t\t\t\t// if this is a subarray, make a copy so we only\n\t\t\t\t\t// include the subarray region from the underlying buffer\n\t\t\t\t\tif (chunk.byteLength !== buf.byteLength) {\n\t\t\t\t\t\tvar copy = new Uint8Array(chunk.byteLength);\n\t\t\t\t\t\tcopy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n\t\t\t\t\t\tbuf = copy.buffer;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn buf;\n\t\t\t\t}\n\n\t\t\t\treturn chunk;\n\t\t\t});\n\t\t}\n\n\t\tfunction BlobBuilderConstructor (ary, options) {\n\t\t\toptions = options || {};\n\n\t\t\tvar bb = new BlobBuilder();\n\t\t\tmapArrayBufferViews(ary).forEach(function (part) {\n\t\t\t\tbb.append(part);\n\t\t\t});\n\n\t\t\treturn options.type ? bb.getBlob(options.type) : bb.getBlob();\n\t\t}\n\n\t\tfunction BlobConstructor (ary, options) {\n\t\t\treturn new origBlob(mapArrayBufferViews(ary), options || {});\n\t\t}\n\n\t\tif (global.Blob) {\n\t\t\tBlobBuilderConstructor.prototype = Blob.prototype;\n\t\t\tBlobConstructor.prototype = Blob.prototype;\n\t\t}\n\n\t\t/********************************************************/\n\t\t/*               String Encoder fallback                */\n\t\t/********************************************************/\n\t\tfunction stringEncode (string) {\n\t\t\tvar pos = 0;\n\t\t\tvar len = string.length;\n\t\t\tvar Arr = global.Uint8Array || Array; // Use byte array when possible\n\n\t\t\tvar at = 0; // output position\n\t\t\tvar tlen = Math.max(32, len + (len >> 1) + 7); // 1.5x size\n\t\t\tvar target = new Arr((tlen >> 3) << 3); // ... but at 8 byte offset\n\n\t\t\twhile (pos < len) {\n\t\t\t\tvar value = string.charCodeAt(pos++);\n\t\t\t\tif (value >= 0xd800 && value <= 0xdbff) {\n\t\t\t\t\t// high surrogate\n\t\t\t\t\tif (pos < len) {\n\t\t\t\t\t\tvar extra = string.charCodeAt(pos);\n\t\t\t\t\t\tif ((extra & 0xfc00) === 0xdc00) {\n\t\t\t\t\t\t\t++pos;\n\t\t\t\t\t\t\tvalue = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (value >= 0xd800 && value <= 0xdbff) {\n\t\t\t\t\t\tcontinue; // drop lone surrogate\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// expand the buffer if we couldn't write 4 bytes\n\t\t\t\tif (at + 4 > target.length) {\n\t\t\t\t\ttlen += 8; // minimum extra\n\t\t\t\t\ttlen *= (1.0 + (pos / string.length) * 2); // take 2x the remaining\n\t\t\t\t\ttlen = (tlen >> 3) << 3; // 8 byte offset\n\n\t\t\t\t\tvar update = new Uint8Array(tlen);\n\t\t\t\t\tupdate.set(target);\n\t\t\t\t\ttarget = update;\n\t\t\t\t}\n\n\t\t\t\tif ((value & 0xffffff80) === 0) { // 1-byte\n\t\t\t\t\ttarget[at++] = value; // ASCII\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ((value & 0xfffff800) === 0) { // 2-byte\n\t\t\t\t\ttarget[at++] = ((value >> 6) & 0x1f) | 0xc0;\n\t\t\t\t} else if ((value & 0xffff0000) === 0) { // 3-byte\n\t\t\t\t\ttarget[at++] = ((value >> 12) & 0x0f) | 0xe0;\n\t\t\t\t\ttarget[at++] = ((value >> 6) & 0x3f) | 0x80;\n\t\t\t\t} else if ((value & 0xffe00000) === 0) { // 4-byte\n\t\t\t\t\ttarget[at++] = ((value >> 18) & 0x07) | 0xf0;\n\t\t\t\t\ttarget[at++] = ((value >> 12) & 0x3f) | 0x80;\n\t\t\t\t\ttarget[at++] = ((value >> 6) & 0x3f) | 0x80;\n\t\t\t\t} else {\n\t\t\t\t\t// FIXME: do we care\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttarget[at++] = (value & 0x3f) | 0x80;\n\t\t\t}\n\n\t\t\treturn target.slice(0, at);\n\t\t}\n\n\t\t/********************************************************/\n\t\t/*               String Decoder fallback                */\n\t\t/********************************************************/\n\t\tfunction stringDecode (buf) {\n\t\t\tvar end = buf.length;\n\t\t\tvar res = [];\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < end) {\n\t\t\t\tvar firstByte = buf[i];\n\t\t\t\tvar codePoint = null;\n\t\t\t\tvar bytesPerSequence = (firstByte > 0xEF) ? 4\n\t\t\t\t\t: (firstByte > 0xDF) ? 3\n\t\t\t\t\t\t: (firstByte > 0xBF) ? 2\n\t\t\t\t\t\t\t: 1;\n\n\t\t\t\tif (i + bytesPerSequence <= end) {\n\t\t\t\t\tvar secondByte, thirdByte, fourthByte, tempCodePoint;\n\n\t\t\t\t\tswitch (bytesPerSequence) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tif (firstByte < 0x80) {\n\t\t\t\t\t\t\tcodePoint = firstByte;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\n\t\t\t\t\t\t\tif (tempCodePoint > 0x7F) {\n\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\tthirdByte = buf[i + 2];\n\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\n\t\t\t\t\t\t\tif (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\tthirdByte = buf[i + 2];\n\t\t\t\t\t\tfourthByte = buf[i + 3];\n\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\n\t\t\t\t\t\t\tif (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (codePoint === null) {\n\t\t\t\t\t// we did not generate a valid codePoint so insert a\n\t\t\t\t\t// replacement char (U+FFFD) and advance only 1 byte\n\t\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t\t\tbytesPerSequence = 1;\n\t\t\t\t} else if (codePoint > 0xFFFF) {\n\t\t\t\t\t// encode to utf16 (surrogate pair dance)\n\t\t\t\t\tcodePoint -= 0x10000;\n\t\t\t\t\tres.push(codePoint >>> 10 & 0x3FF | 0xD800);\n\t\t\t\t\tcodePoint = 0xDC00 | codePoint & 0x3FF;\n\t\t\t\t}\n\n\t\t\t\tres.push(codePoint);\n\t\t\t\ti += bytesPerSequence;\n\t\t\t}\n\n\t\t\tvar len = res.length;\n\t\t\tvar str = \"\";\n\t\t\tvar j = 0;\n\n\t\t\twhile (j < len) {\n\t\t\t\tstr += String.fromCharCode.apply(String, res.slice(j, j += 0x1000));\n\t\t\t}\n\n\t\t\treturn str;\n\t\t}\n\n\t\t// string -> buffer\n\t\tvar textEncode = typeof TextEncoder === \"function\"\n\t\t\t? TextEncoder.prototype.encode.bind(new TextEncoder())\n\t\t\t: stringEncode;\n\n\t\t// buffer -> string\n\t\tvar textDecode = typeof TextDecoder === \"function\"\n\t\t\t? TextDecoder.prototype.decode.bind(new TextDecoder())\n\t\t\t: stringDecode;\n\n\t\tfunction FakeBlobBuilder () {\n\t\t\tfunction bufferClone (buf) {\n\t\t\t\tvar view = new Array(buf.byteLength);\n\t\t\t\tvar array = new Uint8Array(buf);\n\t\t\t\tvar i = view.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tview[i] = array[i];\n\t\t\t\t}\n\t\t\t\treturn view;\n\t\t\t}\n\t\t\tfunction array2base64 (input) {\n\t\t\t\tvar byteToCharMap = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n\t\t\t\tvar output = [];\n\n\t\t\t\tfor (var i = 0; i < input.length; i += 3) {\n\t\t\t\t\tvar byte1 = input[i];\n\t\t\t\t\tvar haveByte2 = i + 1 < input.length;\n\t\t\t\t\tvar byte2 = haveByte2 ? input[i + 1] : 0;\n\t\t\t\t\tvar haveByte3 = i + 2 < input.length;\n\t\t\t\t\tvar byte3 = haveByte3 ? input[i + 2] : 0;\n\n\t\t\t\t\tvar outByte1 = byte1 >> 2;\n\t\t\t\t\tvar outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n\t\t\t\t\tvar outByte3 = ((byte2 & 0x0F) << 2) | (byte3 >> 6);\n\t\t\t\t\tvar outByte4 = byte3 & 0x3F;\n\n\t\t\t\t\tif (!haveByte3) {\n\t\t\t\t\t\toutByte4 = 64;\n\n\t\t\t\t\t\tif (!haveByte2) {\n\t\t\t\t\t\t\toutByte3 = 64;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tbyteToCharMap[outByte1], byteToCharMap[outByte2],\n\t\t\t\t\t\tbyteToCharMap[outByte3], byteToCharMap[outByte4]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn output.join(\"\");\n\t\t\t}\n\n\t\t\tvar create = Object.create || function (a) {\n\t\t\t\tfunction c () {}\n\t\t\t\tc.prototype = a;\n\t\t\t\treturn new c();\n\t\t\t};\n\n\t\t\tfunction getObjectTypeName (o) {\n\t\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t\t}\n\n\t\t\tfunction isPrototypeOf(c, o) {\n\t\t\t\treturn typeof c === \"object\" && Object.prototype.isPrototypeOf.call(c.prototype, o);\n\t\t\t}\n\n\t\t\tfunction isDataView (o) {\n\t\t\t\treturn getObjectTypeName(o) === \"DataView\" || isPrototypeOf(global.DataView, o);\n\t\t\t}\n\n\t\t\tvar arrayBufferClassNames = [\n\t\t\t\t\"Int8Array\",\n\t\t\t\t\"Uint8Array\",\n\t\t\t\t\"Uint8ClampedArray\",\n\t\t\t\t\"Int16Array\",\n\t\t\t\t\"Uint16Array\",\n\t\t\t\t\"Int32Array\",\n\t\t\t\t\"Uint32Array\",\n\t\t\t\t\"Float32Array\",\n\t\t\t\t\"Float64Array\",\n\t\t\t\t\"ArrayBuffer\"\n\t\t\t];\n\n\t\t\tfunction includes(a, v) {\n\t\t\t\treturn a.indexOf(v) !== -1;\n\t\t\t}\n\n\t\t\tfunction isArrayBuffer(o) {\n\t\t\t\treturn includes(arrayBufferClassNames, getObjectTypeName(o)) || isPrototypeOf(global.ArrayBuffer, o);\n\t\t\t}\n\n\t\t\tfunction concatTypedarrays (chunks) {\n\t\t\t\tvar size = 0;\n\t\t\t\tvar j = chunks.length;\n\t\t\t\twhile (j--) { size += chunks[j].length; }\n\t\t\t\tvar b = new Uint8Array(size);\n\t\t\t\tvar offset = 0;\n\t\t\t\tfor (var i = 0; i < chunks.length; i++) {\n\t\t\t\t\tvar chunk = chunks[i];\n\t\t\t\t\tb.set(chunk, offset);\n\t\t\t\t\toffset += chunk.byteLength || chunk.length;\n\t\t\t\t}\n\n\t\t\t\treturn b;\n\t\t\t}\n\n\t\t\t/********************************************************/\n\t\t\t/*                   Blob constructor                   */\n\t\t\t/********************************************************/\n\t\t\tfunction Blob (chunks, opts) {\n\t\t\t\tchunks = chunks ? chunks.slice() : [];\n\t\t\t\topts = opts == null ? {} : opts;\n\t\t\t\tfor (var i = 0, len = chunks.length; i < len; i++) {\n\t\t\t\t\tvar chunk = chunks[i];\n\t\t\t\t\tif (chunk instanceof Blob) {\n\t\t\t\t\t\tchunks[i] = chunk._buffer;\n\t\t\t\t\t} else if (typeof chunk === \"string\") {\n\t\t\t\t\t\tchunks[i] = textEncode(chunk);\n\t\t\t\t\t} else if (isDataView(chunk)) {\n\t\t\t\t\t\tchunks[i] = bufferClone(chunk.buffer);\n\t\t\t\t\t} else if (isArrayBuffer(chunk)) {\n\t\t\t\t\t\tchunks[i] = bufferClone(chunk);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchunks[i] = textEncode(String(chunk));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._buffer = global.Uint8Array\n\t\t\t\t\t? concatTypedarrays(chunks)\n\t\t\t\t\t: [].concat.apply([], chunks);\n\t\t\t\tthis.size = this._buffer.length;\n\n\t\t\t\tthis.type = opts.type || \"\";\n\t\t\t\tif (/[^\\u0020-\\u007E]/.test(this.type)) {\n\t\t\t\t\tthis.type = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.type = this.type.toLowerCase();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBlob.prototype.arrayBuffer = function () {\n\t\t\t\treturn Promise.resolve(this._buffer.buffer || this._buffer);\n\t\t\t};\n\n\t\t\tBlob.prototype.text = function () {\n\t\t\t\treturn Promise.resolve(textDecode(this._buffer));\n\t\t\t};\n\n\t\t\tBlob.prototype.slice = function (start, end, type) {\n\t\t\t\tvar slice = this._buffer.slice(start || 0, end || this._buffer.length);\n\t\t\t\treturn new Blob([slice], {type: type});\n\t\t\t};\n\n\t\t\tBlob.prototype.toString = function () {\n\t\t\t\treturn \"[object Blob]\";\n\t\t\t};\n\n\t\t\t/********************************************************/\n\t\t\t/*                   File constructor                   */\n\t\t\t/********************************************************/\n\t\t\tfunction File (chunks, name, opts) {\n\t\t\t\topts = opts || {};\n\t\t\t\tvar a = Blob.call(this, chunks, opts) || this;\n\t\t\t\ta.name = name.replace(/\\//g, \":\");\n\t\t\t\ta.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date();\n\t\t\t\ta.lastModified = +a.lastModifiedDate;\n\n\t\t\t\treturn a;\n\t\t\t}\n\n\t\t\tFile.prototype = create(Blob.prototype);\n\t\t\tFile.prototype.constructor = File;\n\n\t\t\tif (Object.setPrototypeOf) {\n\t\t\t\tObject.setPrototypeOf(File, Blob);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tFile.__proto__ = Blob;\n\t\t\t\t} catch (e) {/**/}\n\t\t\t}\n\n\t\t\tFile.prototype.toString = function () {\n\t\t\t\treturn \"[object File]\";\n\t\t\t};\n\n\t\t\t/********************************************************/\n\t\t\t/*                FileReader constructor                */\n\t\t\t/********************************************************/\n\t\t\tfunction FileReader () {\n\t\t\t\tif (!(this instanceof FileReader)) {\n\t\t\t\t\tthrow new TypeError(\"Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n\t\t\t\t}\n\n\t\t\t\tvar delegate = document.createDocumentFragment();\n\t\t\t\tthis.addEventListener = delegate.addEventListener;\n\t\t\t\tthis.dispatchEvent = function (evt) {\n\t\t\t\t\tvar local = this[\"on\" + evt.type];\n\t\t\t\t\tif (typeof local === \"function\") local(evt);\n\t\t\t\t\tdelegate.dispatchEvent(evt);\n\t\t\t\t};\n\t\t\t\tthis.removeEventListener = delegate.removeEventListener;\n\t\t\t}\n\n\t\t\tfunction _read (fr, blob, kind) {\n\t\t\t\tif (!(blob instanceof Blob)) {\n\t\t\t\t\tthrow new TypeError(\"Failed to execute '\" + kind + \"' on 'FileReader': parameter 1 is not of type 'Blob'.\");\n\t\t\t\t}\n\n\t\t\t\tfr.result = \"\";\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tthis.readyState = FileReader.LOADING;\n\t\t\t\t\tfr.dispatchEvent(new Event(\"load\"));\n\t\t\t\t\tfr.dispatchEvent(new Event(\"loadend\"));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tFileReader.EMPTY = 0;\n\t\t\tFileReader.LOADING = 1;\n\t\t\tFileReader.DONE = 2;\n\t\t\tFileReader.prototype.error = null;\n\t\t\tFileReader.prototype.onabort = null;\n\t\t\tFileReader.prototype.onerror = null;\n\t\t\tFileReader.prototype.onload = null;\n\t\t\tFileReader.prototype.onloadend = null;\n\t\t\tFileReader.prototype.onloadstart = null;\n\t\t\tFileReader.prototype.onprogress = null;\n\n\t\t\tFileReader.prototype.readAsDataURL = function (blob) {\n\t\t\t\t_read(this, blob, \"readAsDataURL\");\n\t\t\t\tthis.result = \"data:\" + blob.type + \";base64,\" + array2base64(blob._buffer);\n\t\t\t};\n\n\t\t\tFileReader.prototype.readAsText = function (blob) {\n\t\t\t\t_read(this, blob, \"readAsText\");\n\t\t\t\tthis.result = textDecode(blob._buffer);\n\t\t\t};\n\n\t\t\tFileReader.prototype.readAsArrayBuffer = function (blob) {\n\t\t\t\t_read(this, blob, \"readAsText\");\n\t\t\t\t// return ArrayBuffer when possible\n\t\t\t\tthis.result = (blob._buffer.buffer || blob._buffer).slice();\n\t\t\t};\n\n\t\t\tFileReader.prototype.abort = function () {};\n\n\t\t\t/********************************************************/\n\t\t\t/*                         URL                          */\n\t\t\t/********************************************************/\n\t\t\tURL.createObjectURL = function (blob) {\n\t\t\t\treturn blob instanceof Blob\n\t\t\t\t\t? \"data:\" + blob.type + \";base64,\" + array2base64(blob._buffer)\n\t\t\t\t\t: createObjectURL.call(URL, blob);\n\t\t\t};\n\n\t\t\tURL.revokeObjectURL = function (url) {\n\t\t\t\trevokeObjectURL && revokeObjectURL.call(URL, url);\n\t\t\t};\n\n\t\t\t/********************************************************/\n\t\t\t/*                         XHR                          */\n\t\t\t/********************************************************/\n\t\t\tvar _send = global.XMLHttpRequest && global.XMLHttpRequest.prototype.send;\n\t\t\tif (_send) {\n\t\t\t\tXMLHttpRequest.prototype.send = function (data) {\n\t\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\t\tthis.setRequestHeader(\"Content-Type\", data.type);\n\t\t\t\t\t\t_send.call(this, textDecode(data._buffer));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_send.call(this, data);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\texports.Blob = Blob;\n\t\t\texports.File = File;\n\t\t\texports.FileReader = FileReader;\n\t\t\texports.URL = URL;\n\t\t}\n\n\t\tfunction fixFileAndXHR () {\n\t\t\tvar isIE = !!global.ActiveXObject || (\n\t\t\t\t\"-ms-scroll-limit\" in document.documentElement.style &&\n\t\t\t\t\"-ms-ime-align\" in document.documentElement.style\n\t\t\t);\n\n\t\t\t// Monkey patched\n\t\t\t// IE doesn't set Content-Type header on XHR whose body is a typed Blob\n\t\t\t// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/6047383\n\t\t\tvar _send = global.XMLHttpRequest && global.XMLHttpRequest.prototype.send;\n\t\t\tif (isIE && _send) {\n\t\t\t\tXMLHttpRequest.prototype.send = function (data) {\n\t\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\t\tthis.setRequestHeader(\"Content-Type\", data.type);\n\t\t\t\t\t\t_send.call(this, data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_send.call(this, data);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tnew File([], \"\");\n\t\t\t\texports.File = global.File;\n\t\t\t\texports.FileReader = global.FileReader;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\texports.File = new Function(\"class File extends Blob {\" +\n\t\t\t\t\t\t\"constructor(chunks, name, opts) {\" +\n\t\t\t\t\t\t\t\"opts = opts || {};\" +\n\t\t\t\t\t\t\t\"super(chunks, opts || {});\" +\n\t\t\t\t\t\t\t\"this.name = name.replace(/\\\\//g, \\\":\\\");\" +\n\t\t\t\t\t\t\t\"this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date();\" +\n\t\t\t\t\t\t\t\"this.lastModified = +this.lastModifiedDate;\" +\n\t\t\t\t\t\t\"}};\" +\n\t\t\t\t\t\t\"return new File([], \\\"\\\"), File\"\n\t\t\t\t\t)();\n\t\t\t\t} catch (e) {\n\t\t\t\t\texports.File = function (b, d, c) {\n\t\t\t\t\t\tvar blob = new Blob(b, c);\n\t\t\t\t\t\tvar t = c && void 0 !== c.lastModified ? new Date(c.lastModified) : new Date();\n\n\t\t\t\t\t\tblob.name = d.replace(/\\//g, \":\");\n\t\t\t\t\t\tblob.lastModifiedDate = t;\n\t\t\t\t\t\tblob.lastModified = +t;\n\t\t\t\t\t\tblob.toString = function () {\n\t\t\t\t\t\t\treturn \"[object File]\";\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (strTag) {\n\t\t\t\t\t\t\tblob[strTag] = \"File\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn blob;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (blobSupported) {\n\t\t\tfixFileAndXHR();\n\t\t\texports.Blob = blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n\t\t} else if (blobBuilderSupported) {\n\t\t\tfixFileAndXHR();\n\t\t\texports.Blob = BlobBuilderConstructor;\n\t\t} else {\n\t\t\tFakeBlobBuilder();\n\t\t}\n\n\t\tif (strTag) {\n\t\t\tif (!exports.File.prototype[strTag]) exports.File.prototype[strTag] = \"File\";\n\t\t\tif (!exports.Blob.prototype[strTag]) exports.Blob.prototype[strTag] = \"Blob\";\n\t\t\tif (!exports.FileReader.prototype[strTag]) exports.FileReader.prototype[strTag] = \"FileReader\";\n\t\t}\n\n\t\tvar blob = exports.Blob.prototype;\n\t\tvar stream;\n\n\t\ttry {\n\t\t\tnew ReadableStream({ type: \"bytes\" });\n\t\t\tstream = function stream() {\n\t\t\t\tvar position = 0;\n\t\t\t\tvar blob = this;\n\n\t\t\t\treturn new ReadableStream({\n\t\t\t\t\ttype: \"bytes\",\n\t\t\t\t\tautoAllocateChunkSize: 524288,\n\n\t\t\t\t\tpull: function (controller) {\n\t\t\t\t\t\tvar v = controller.byobRequest.view;\n\t\t\t\t\t\tvar chunk = blob.slice(position, position + v.byteLength);\n\t\t\t\t\t\treturn chunk.arrayBuffer()\n\t\t\t\t\t\t\t.then(function (buffer) {\n\t\t\t\t\t\t\t\tvar uint8array = new Uint8Array(buffer);\n\t\t\t\t\t\t\t\tvar bytesRead = uint8array.byteLength;\n\n\t\t\t\t\t\t\t\tposition += bytesRead;\n\t\t\t\t\t\t\t\tv.set(uint8array);\n\t\t\t\t\t\t\t\tcontroller.byobRequest.respond(bytesRead);\n\n\t\t\t\t\t\t\t\tif(position >= blob.size)\n\t\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tnew ReadableStream({});\n\t\t\t\tstream = function stream(blob){\n\t\t\t\t\tvar position = 0;\n\n\t\t\t\t\treturn new ReadableStream({\n\t\t\t\t\t\tpull: function (controller) {\n\t\t\t\t\t\t\tvar chunk = blob.slice(position, position + 524288);\n\n\t\t\t\t\t\t\treturn chunk.arrayBuffer().then(function (buffer) {\n\t\t\t\t\t\t\t\tposition += buffer.byteLength;\n\t\t\t\t\t\t\t\tvar uint8array = new Uint8Array(buffer);\n\t\t\t\t\t\t\t\tcontroller.enqueue(uint8array);\n\n\t\t\t\t\t\t\t\tif (position == blob.size)\n\t\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\tnew Response(\"\").body.getReader().read();\n\t\t\t\t\tstream = function stream() {\n\t\t\t\t\t\treturn (new Response(this)).body;\n\t\t\t\t\t};\n\t\t\t\t} catch (e) {\n\t\t\t\t\tstream = function stream() {\n\t\t\t\t\t\tthrow new Error(\"Include https://github.com/MattiasBuelens/web-streams-polyfill\");\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction promisify(obj) {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tobj.onload = obj.onerror = function(evt) {\n\t\t\t\t\tobj.onload = obj.onerror = null;\n\n\t\t\t\t\tevt.type === \"load\" ?\n\t\t\t\t\t\tresolve(obj.result || obj) :\n\t\t\t\t\t\treject(new Error(\"Failed to read the blob/file\"));\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif (!blob.arrayBuffer) {\n\t\t\tblob.arrayBuffer = function arrayBuffer() {\n\t\t\t\tvar fr = new FileReader();\n\t\t\t\tfr.readAsArrayBuffer(this);\n\t\t\t\treturn promisify(fr);\n\t\t\t};\n\t\t}\n\n\t\tif (!blob.text) {\n\t\t\tblob.text = function text() {\n\t\t\t\tvar fr = new FileReader();\n\t\t\t\tfr.readAsText(this);\n\t\t\t\treturn promisify(fr);\n\t\t\t};\n\t\t}\n\n\t\tif (!blob.stream) {\n\t\t\tblob.stream = stream;\n\t\t}\n\t});\n})(\n\ttypeof self !== \"undefined\" && self ||\n\t\ttypeof window !== \"undefined\" && window ||\n\t\ttypeof global !== \"undefined\" && global ||\n\t\tthis\n);\n","/**\n\n * @link   github https://github.com/fab77/FITSParser\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n */\n\nimport { FITSWriter } from \"./FITSWriter.js\";\nimport { ParsePayload } from \"./ParsePayload.js\";\nimport { ParseHeader } from \"./ParseHeader.js\";\nimport { FITSHeader } from \"./model/FITSHeader.js\";\nimport { FITSParsed } from \"./model/FITSParsed.js\";\n// import fetch from 'cross-fetch';\n// import { readFile } from \"node:fs/promises\";\n\nexport class FITSParser {\n  _url: string;\n\n  constructor(url: string) {\n    this._url = url;\n  }\n\n  async loadFITS(): Promise<FITSParsed | null> {\n    return this.getFile(this._url)\n      .then((rawdata) => {\n        if (rawdata !== null && rawdata.byteLength > 0) {\n          const uint8 = new Uint8Array(rawdata);\n          const fits = this.processFits(uint8);\n          return fits;\n        }\n        return null;\n      })\n      .catch((error) => {\n        if (error?.response?.data?.message) {\n          throw new Error(\n            \"[FITSParser->loadFITS] \" + error.response.data.message\n          );\n        }\n        throw error;\n      });\n  }\n\n  processFits(rawdata: Uint8Array): FITSParsed {\n    const header: FITSHeader = ParseHeader.parse(rawdata);\n\n    const payloadParser = new ParsePayload(header, rawdata);\n    const pixelvalues = payloadParser.parse();\n    // if (rawdata.length > (header.getNumRows() + (pixelvalues.length * pixelvalues[0].length))) {\n    // let leftover = rawdata.length - (header.getNumRows() + (pixelvalues.length * pixelvalues[0].length));\n    // \tthrow new Error(\"[FITSParser->processFits] It seems that there's at least one more HDU since there are \" + leftover + \" bytes not processed.\");\n    // \tconsole.warn(\"It seems that there's at least one more HDU since there are \" + leftover + \" bytes not processed.\")\n    // }\n    return {\n      header: header,\n      data: pixelvalues,\n    };\n  }\n\n  static generateFITS(header: FITSHeader, rawdata: Uint8Array[]) {\n    const writer = new FITSWriter();\n    writer.run(header, rawdata);\n    return writer.typedArrayToURL();\n  }\n\n  async getFile(uri: string): Promise<Buffer | ArrayBuffer> {\n\n    let data;\n    if (!uri.substring(0, 5).toLowerCase().includes(\"http\")) {\n\n      let p = await import('./getLocalFile.js')\n      data = await p.getLocalFile(uri);\n\n    } else {\n\n      let p = await import('./getFile.js')\n      data = await p.getFile(uri);\n    }\n    return data;\n\n  }\n\n\n}\n","/**\n * Summary. (bla bla bla)\n *\n * Description. (bla bla bla)\n *\n * @link   github https://github.com/fab77/fitsontheweb\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n * import GnomonicProjection from './GnomonicProjection';\n * BITPIX definition from https://archive.stsci.edu/fits/fits_standard/node39.html\n * and \"Definition of the Flexible Image Transport System (FITS)\" standard document\n * defined by FITS Working Group from the International Astronomical Union\n * http://fits.gsfc.nasa.gov/iaufwg/\n * 8\t8-bit Character or unsigned binary integer\n * 16\t16-bit twos-complement binary integer\n * 32\t32-bit twos-complement binary integer\n * -32\t32-bit IEEE single precision floating point\n * -64\t64-bit IEEE double precision floating point\n *\n */\nimport { Blob } from 'blob-polyfill';\nimport { FITSHeaderItem } from \"./model/FITSHeaderItem.js\";\nimport { ParseUtils } from \"./ParseUtils.js\";\nimport { FITSHeader } from \"./model/FITSHeader.js\";\n// import fs from 'node:fs/promises';\n\nexport class FITSWriter {\n  _headerArray: Uint8Array;\n  _payloadArray: Uint8Array[];\n  _fitsData: Uint8Array;\n\n  constructor() {\n    this._headerArray = new Uint8Array();\n    this._payloadArray = new Array<Uint8Array>();\n    this._fitsData = new Uint8Array();\n  }\n\n  run(header: FITSHeader, rawdata: Uint8Array[]) {\n    this.prepareHeader(header);\n    this._payloadArray = rawdata;\n    this.prepareFITS();\n  }\n\n  prepareHeader(headerDetails: FITSHeader) {\n    const item = new FITSHeaderItem(\"END\");\n    headerDetails.addItem(item);\n\n    let str = \"\";\n    for (let i = 0; i < headerDetails.getItemList().length; i++) {\n      const item: FITSHeaderItem = headerDetails.getItemList()[i];\n      let s = this.formatHeaderLine(item);\n      if (s !== undefined) {\n        str += s;\n      }\n    }\n\n    const strBytelen = new TextEncoder().encode(str).length;\n\n    const nhdu = Math.ceil(strBytelen / 2880);\n    const offset = nhdu * 2880;\n\n    for (let j = 0; j < offset - strBytelen; j++) {\n      str += \" \";\n    }\n\n    const ab = new ArrayBuffer(str.length);\n    // Javascript character occupies 2 16-bit -> reducing it to 1 byte\n    this._headerArray = new Uint8Array(ab);\n    for (let i = 0; i < str.length; i++) {\n      this._headerArray[i] = ParseUtils.getByteAt(str, i);\n    }\n  }\n\n  // formatHeaderLine(item: string | undefined, value: string | number, comment: string) {\n  formatHeaderLine(item: FITSHeaderItem) {\n    let str;\n    let keyword = item.key;\n    let value = item.value;\n    let comment = item.comment;\n\n    if (keyword !== null && keyword !== undefined) {\n      str = keyword;\n\n      if (keyword == \"END\") {\n        for (let j = 80; j > keyword.length; j--) {\n          str += \" \";\n        }\n        return str;\n      }\n\n      if (keyword == \"COMMENT\" || keyword == \"HISTORY\") {\n        for (let i = 0; i < 10 - keyword.length; i++) {\n          str += \" \";\n        }\n        str += value;\n        const len = str.length;\n        for (let j = 80; j > len; j--) {\n          str += \" \";\n        }\n        return str;\n      }\n\n      for (let i = 0; i < 8 - keyword.length; i++) {\n        str += \" \";\n      }\n\n      str += \"= \";\n\n      if (value !== null && value !== undefined) {\n        // value\n        str += value;\n        if (comment !== null && comment !== undefined) {\n          str += comment;\n        }\n        const len = str.length;\n        for (let j = 80; j > len; j--) {\n          str += \" \";\n        }\n      } else {\n        if (comment !== null && comment !== undefined) {\n          str += comment;\n        }\n        const len = str.length;\n        for (let j = 80; j > len; j--) {\n          str += \" \";\n        }\n      }\n    } else {\n      // keyword null\n      str = \"\";\n      for (let j = 0; j < 18; j++) {\n        str += \" \";\n      }\n      if (comment !== null && comment !== undefined) {\n        str += comment;\n        const len = str.length;\n        for (let j = 80; j > len; j--) {\n          str += \" \";\n        }\n      } else {\n        str = \"\";\n        for (let j = 80; j > 0; j--) {\n          str += \" \";\n        }\n      }\n    }\n    return str;\n  }\n\n  prepareFITS() {\n    const bytes = new Uint8Array(\n      this._headerArray.length +\n      this._payloadArray[0].length * this._payloadArray.length\n    );\n\n    bytes.set(this._headerArray, 0);\n    for (let i = 0; i < this._payloadArray.length; i++) {\n      const uint8 = this._payloadArray[i];\n      bytes.set(uint8, this._headerArray.length + i * uint8.length);\n    }\n\n    this._fitsData = bytes;\n  }\n\n  // writeFITS(fileuri: string) {\n  //   // const dirname = path.dirname(fileuri);\n  //   // fs.mkdir(dirname, { recursive: true });\n  //   fs.writeFile(fileuri, this._fitsData);\n  //   // if (fs.existsSync(dirname)) {\n  //   //   fs.writeFileSync(fileuri, this._fitsData);\n  //   // } else {\n  //   //   console.error(dirname + \" doesn't exist\");\n  //   // }\n  // }\n\n  typedArrayToURL(): string {\n    const b = new Blob([this._fitsData], { type: \"application/fits\" });\n    // console.log(`<html><body><img src='${URL.createObjectURL(b)}'</body></html>`);\n    return URL.createObjectURL(b);\n  }\n}\n","import { FITSHeader } from \"./model/FITSHeader.js\";\nimport { FITSHeaderItem } from \"./model/FITSHeaderItem.js\";\nimport { FITSHeaderLine } from \"./model/FITSHeaderLine.js\";\n/**\n * Summary. (bla bla bla)\n *\n * Description. (bla bla bla)\n *\n * @link   github https://github.com/fab77/FITSParser\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n */\n\nexport class ParseHeader {\n  static parse(rawdata: Uint8Array): FITSHeader {\n    // only one header block (2880) allowed atm.\n    // TODO handle multiple header blocks\n    // let headerByteData = new Uint8Array(rawdata, 0, 2880);\n\n    const textDecoder = new TextDecoder(\"iso-8859-1\");\n\n    const header = new FITSHeader();\n\n    let nline = 0;\n    let key = \"\";\n    let val: string;\n\n    let u8line: Uint8Array;\n    let u8key: Uint8Array;\n    let u8val: Uint8Array;\n    let u8ind: Uint8Array;\n    // let ind: string;\n    let item: FITSHeaderItem | null;\n    let fitsLine: FITSHeaderLine;\n\n    item = null;\n\n    while (key !== \"END\" && rawdata.length > 0) {\n      // line 80 characters\n      u8line = new Uint8Array(rawdata.slice(nline * 80, nline * 80 + 80));\n      nline++;\n      // key\n      u8key = new Uint8Array(u8line.slice(0, 8));\n      key = textDecoder.decode(u8key).trim();\n      // value indicator\n      u8ind = new Uint8Array(u8line.slice(8, 10));\n      // ind = textDecoder.decode(u8ind);\n      // reading value\n      u8val = new Uint8Array(u8line.slice(10, 80));\n      val = textDecoder.decode(u8val).trim();\n\n      if (u8ind[0] == 61 && u8ind[1] == 32) {\n        let firstchar = 32;\n        for (let i = 0; i < u8val.length; i++) {\n          if (u8val[i] != 32) {\n            firstchar = u8val[i];\n            break;\n          }\n        }\n        if (firstchar == 39 || !Number(val)) {\n          // value starts with '\n          // [ival, icomment]\n          fitsLine = ParseHeader.parseStringValue(u8val);\n        } else {\n          if (firstchar == 84 || firstchar == 70) {\n            // T or F\n            fitsLine = ParseHeader.parseLogicalValue(u8val);\n          } else {\n            val = textDecoder.decode(u8val).trim();\n            if (val.includes(\".\")) {\n              fitsLine = ParseHeader.parseFloatValue(u8val);\n            } else {\n              fitsLine = ParseHeader.parseIntValue(u8val);\n            }\n          }\n        }\n        item = new FITSHeaderItem(key, fitsLine.val, fitsLine.comment);\n      } else {\n        if (key == \"COMMENT\" || key == \"HISTORY\") {\n          item = new FITSHeaderItem(key, undefined, val);\n        } else {\n          let firstchar = 32;\n          for (let i = 0; i < u8val.length; i++) {\n            if (u8val[i] != 32) {\n              firstchar = u8val[i];\n              break;\n            }\n          }\n          if (firstchar == 47) {\n            // single / this is the case when no key nor value indicator is defined\n            item = new FITSHeaderItem(undefined, undefined, val);\n          } else if (firstchar == 32) {\n            // case when there's a line with only spaces\n            item = new FITSHeaderItem(undefined, undefined, undefined);\n          }\n        }\n      }\n      if (item != null) {\n        header.addItem(item);\n      }\n    }\n\n    item = new FITSHeaderItem(\n      \"COMMENT\",\n      \"FITS generated with FITSParser on \",\n      undefined\n    );\n    header.addItem(item);\n    const now = new Date();\n    item = new FITSHeaderItem(\"COMMENT\", now.toString());\n    header.addItem(item);\n\n    const nblock = Math.ceil(nline / 36);\n    const offset = nblock * 2880;\n\n    header.offset = offset;\n\n    return header;\n  }\n\n  static parseStringValue(u8buffer: Uint8Array): FITSHeaderLine {\n    const textDecoder = new TextDecoder(\"iso-8859-1\");\n    const decoded = textDecoder.decode(u8buffer).trim();\n    const idx = decoded.lastIndexOf(\"/\");\n    const val = decoded.substring(0, idx);\n    let comment = decoded.substring(idx);\n    // if (comment === undefined) {\n    //   comment = null;\n    // }\n    return {\n      val: val,\n      comment: comment,\n    };\n  }\n\n  static parseLogicalValue(u8buffer: Uint8Array): FITSHeaderLine {\n    const textDecoder = new TextDecoder(\"iso-8859-1\");\n    const val = textDecoder.decode(u8buffer).trim();\n    const tokens = val.split(\"/\");\n    if (tokens[1] === undefined) {\n      return {\n        val: tokens[0].trim(),\n        comment: undefined,\n      };\n    }\n    return {\n      val: tokens[0].trim(),\n      comment: \" /\" + tokens[1],\n    };\n  }\n\n  static parseIntValue(u8buffer: Uint8Array): FITSHeaderLine {\n    const textDecoder = new TextDecoder(\"iso-8859-1\");\n    const val = textDecoder.decode(u8buffer).trim();\n    const tokens = val.split(\"/\");\n    if (tokens[1] === undefined) {\n      return {\n        val: parseInt(tokens[0].trim()),\n        comment: undefined,\n      };\n    }\n    return {\n      val: parseInt(tokens[0].trim()),\n      comment: \" /\" + tokens[1],\n    };\n  }\n\n  static parseFloatValue(u8buffer: Uint8Array): FITSHeaderLine {\n    const textDecoder = new TextDecoder(\"iso-8859-1\");\n    const val = textDecoder.decode(u8buffer).trim();\n    const tokens = val.split(\"/\");\n    if (tokens[1] === undefined) {\n      return {\n        val: parseFloat(tokens[0].trim()),\n        comment: undefined,\n      };\n    }\n    return {\n      val: parseFloat(tokens[0].trim()),\n      comment: \" /\" + tokens[1],\n    };\n  }\n}\n","// \"use strict\";\n\n/**\n * Summary. (bla bla bla)\n *\n * Description. (bla bla bla)\n *\n * @link   github https://github.com/fab77/FITSParser\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n */\nimport { FITSHeader } from \"./model/FITSHeader.js\";\nimport { FITSHeaderItem } from \"./model/FITSHeaderItem.js\";\nimport { ParseUtils } from \"./ParseUtils.js\";\n\n// let colorsMap = new Map();\n// colorsMap.set(\"grayscale\",\"grayscale\");\n// colorsMap.set(\"planck\",\"planck\");\n// colorsMap.set(\"eosb\",\"eosb\");\n// colorsMap.set(\"rainbow\",\"rainbow\");\n// colorsMap.set(\"cmb\",\"cmb\");\n// colorsMap.set(\"cubehelix\",\"cubehelix\");\n\nexport class ParsePayload {\n  _u8data: Uint8Array;\n  _BZERO: number | undefined;\n  _BSCALE: number | undefined;\n  _BLANK: number | undefined;\n  _BITPIX: number | undefined;\n  _NAXIS1: number | undefined;\n  _NAXIS2: number | undefined;\n  _DATAMIN: number | undefined;\n  _DATAMAX: number | undefined;\n  _physicalblank: number | undefined;\n\n  constructor(fitsheader: FITSHeader, rawdata: Uint8Array) {\n\n    this._u8data = new Uint8Array();\n    this._BZERO = undefined;\n    this._BSCALE = undefined;\n    this._BLANK = undefined;\n    this._BITPIX = undefined;\n    this._NAXIS1 = undefined;\n    this._NAXIS2 = undefined;\n    this._DATAMIN = undefined;\n    this._DATAMAX = undefined;\n    this._physicalblank = undefined;\n\n    const buffer = rawdata.slice(fitsheader.offset);\n    this._u8data = new Uint8Array(buffer);\n    this.init(fitsheader);\n\n  }\n\n  init(fitsheader: FITSHeader) {\n    this._BZERO = fitsheader.get(\"BZERO\");\n    if (this._BZERO === undefined) {\n      this._BZERO = 0;\n    }\n    this._BSCALE = fitsheader.get(\"BSCALE\");\n    if (this._BSCALE === undefined) {\n      this._BSCALE = 1;\n    }\n    this._BLANK = fitsheader.get(\"BLANK\"); // undefined in case it's not present in the header\n    // this._BLANK_pv = this._BZERO + this._BSCALE * this._BLANK || undefined;\n    this._BITPIX = fitsheader.get(\"BITPIX\");\n    this._NAXIS1 = fitsheader.get(\"NAXIS1\");\n    this._NAXIS2 = fitsheader.get(\"NAXIS2\");\n    this._DATAMIN = fitsheader.get(\"DATAMIN\");\n    this._DATAMAX = fitsheader.get(\"DATAMAX\");\n\n    this._physicalblank = undefined;\n    if (this._DATAMAX === undefined || this._DATAMIN === undefined) {\n      const [min, max] = this.computePhysicalMinAndMax();\n      this._DATAMAX = max;\n      this._DATAMIN = min;\n      const maxitem = new FITSHeaderItem(\n        \"DATAMAX\",\n        max,\n        \" / computed with FITSParser\"\n      );\n      const minitem = new FITSHeaderItem(\n        \"DATAMIN\",\n        min,\n        \" / computed with FITSParser\"\n      );\n      fitsheader.addItem(maxitem);\n      fitsheader.addItem(minitem);\n      // fitsheader.set(\"DATAMAX\", max);\n      // fitsheader.set(\"DATAMIN\", min);\n    }\n    // let item = new FITSHeaderItem(\"END\", null, null);\n    // fitsheader.addItem(item);\n  }\n\n  computePhysicalMinAndMax(): [number | undefined, number | undefined] {\n    let i = 0;\n    if (this._BITPIX === undefined) {\n      throw new Error(\"BITPIX is not defined\");\n    }\n    const bytesXelem = Math.abs(this._BITPIX / 8);\n    const pxLength = this._u8data.byteLength / bytesXelem;\n    let px_val, ph_val;\n    let min = undefined;\n    let max = undefined;\n\n    if (this._BLANK !== undefined) {\n      this._physicalblank = this.pixel2physicalValue(this._BLANK);\n    }\n\n    while (i < pxLength) {\n      // px_val = this.extractPixelValue(bytesXelem*i);\n      px_val = this.extractPixelValue(bytesXelem * i);\n      if (px_val === undefined) {\n        i++;\n        continue;\n      }\n      ph_val = this.pixel2physicalValue(px_val);\n      if (min === undefined) {\n        min = ph_val;\n      }\n      if (max === undefined) {\n        max = ph_val;\n      }\n      //TODO check below if\n      if (this._physicalblank === undefined || this._physicalblank !== ph_val) {\n        if (ph_val !== undefined && (ph_val < min || min === undefined)) {\n          min = ph_val;\n        }\n\n        if (ph_val !== undefined && (ph_val > max || max === undefined)) {\n          max = ph_val;\n        }\n      }\n      i++;\n    }\n    return [min, max];\n  }\n\n  parse(): Array<Uint8Array> {\n    // let px_val; // pixel array value\n    // let ph_val = undefined; // pixel physical value\n    if (this._BITPIX === undefined) {\n      throw new Error(\"BITPIX is undefined\")\n    }\n    if (this._NAXIS1 === undefined) {\n      throw new Error(\"NAXIS1 is undefined\")\n    }\n    if (this._NAXIS2 === undefined) {\n      throw new Error(\"NAXIS2 is undefined\")\n    }\n    \n    const bytesXelem = Math.abs(this._BITPIX / 8);\n    let pxLength = this._u8data.byteLength / bytesXelem;\n    pxLength = this._NAXIS1 * this._NAXIS2;\n\n    let k = 0;\n    let c, r;\n    const pixelvalues = [];\n\n    //  let pixv, pv;\n    while (k < pxLength) {\n      r = Math.floor(k / this._NAXIS1); // row\n      c = (k - r * this._NAXIS1) * bytesXelem; // col\n      if (c === 0) {\n        pixelvalues[r] = new Uint8Array(this._NAXIS1 * bytesXelem);\n      }\n\n      // px_val = this.extractPixelValue(bytesXelem * k);\n      // ph_val = this.pixel2physicalValue(px_val);\n\n      // TODO check if ph_val == blank\n      // if not then use ph_val to compute datamin and datamax\n\n      for (let i = 0; i < bytesXelem; i++) {\n        pixelvalues[r][c + i] = this._u8data[k * bytesXelem + i];\n      }\n\n      // if (k == 232) {\n      // \tpixv = this.extractPixelValue(k * bytesXelem);\n      // \tpv = this._BZERO + this._BSCALE * pixv;\n      // }\n\n      k++;\n    }\n\n    return pixelvalues;\n  }\n\n  /** this can be deleted */\n  extractPixelValue(offset: number): number | undefined {\n    let px_val = undefined; // pixel value\n    if (this._BITPIX == 16) {\n      // 16-bit 2's complement binary integer\n      px_val = ParseUtils.parse16bit2sComplement(\n        this._u8data[offset],\n        this._u8data[offset + 1]\n      );\n    } else if (this._BITPIX == 32) {\n      // IEEE 754 half precision (float16) ??\n      px_val = ParseUtils.parse32bit2sComplement(\n        this._u8data[offset],\n        this._u8data[offset + 1],\n        this._u8data[offset + 2],\n        this._u8data[offset + 3]\n      );\n    } else if (this._BITPIX == -32) {\n      // 32-bit IEEE single-precision floating point\n      // px_val = ParseUtils.parse32bitSinglePrecisionFloatingPoint (this._u8data[offset], this._u8data[offset+1], this._u8data[offset+2], this._u8data[offset+3]);\n      px_val = ParseUtils.parseFloatingPointFormat(\n        this._u8data.slice(offset, offset + 4),\n        8,\n        23\n      );\n    } else if (this._BITPIX == 64) {\n      // 64-bit 2's complement binary integer\n      throw new Error(\n        \"BITPIX=64 -> 64-bit 2's complement binary integer NOT supported yet.\"\n      );\n    } else if (this._BITPIX == -64) {\n      // 64-bit IEEE double-precision floating point\n      //https://babbage.cs.qc.cuny.edu/ieee-754.old/Decimal.html\n      px_val = ParseUtils.parseFloatingPointFormat(\n        this._u8data.slice(offset, offset + 8),\n        11,\n        52\n      );\n    }\n\n    return px_val;\n  }\n\n  pixel2physicalValue(pxval: number): number{\n    if (this._BZERO === undefined || this._BSCALE === undefined) {\n      throw new Error(\"Either BZERO or BSCALE is undefined\");\n    }\n    return this._BZERO + this._BSCALE * pxval;\n    \n  }\n}\n","/**\n * Summary. (bla bla bla)\n *\n * Description. (bla bla bla)\n *\n * @link   github https://github.com/fab77/FITSParser\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n */\n\nexport class ParseUtils {\n  static getStringAt(data: string, offset: number, length: number) {\n    const chars: string[] = [];\n    for (let i = offset, j = 0; i < offset + length; i++, j++) {\n      chars[j] = String.fromCharCode(data.charCodeAt(i) & 0xff);\n    }\n    return chars.join(\"\");\n  }\n\n  static byteString(n: number): string {\n    if (n < 0 || n > 255 || n % 1 !== 0) {\n      throw new Error(n + \" does not fit in a byte\");\n    }\n    return (\"000000000\" + n.toString(2)).substr(-8);\n  }\n\n  static parse32bitSinglePrecisionFloatingPoint(\n    byte1: number,\n    byte2: number,\n    byte3: number,\n    byte4: number\n  ): number {\n    let long = (((((byte1 << 8) + byte2) << 8) + byte3) << 8) + byte4;\n    if (long < 0) long += 4294967296;\n    const float =\n      (1.0 + (long & 0x007fffff) / 0x0800000) *\n      Math.pow(2, ((long & 0x7f800000) >> 23) - 127);\n    return float;\n  }\n\n  static convertBlankToBytes(blank: number, nbytes: number): Uint8Array {\n    let str = Math.abs(blank).toString(2);\n    while (str.length / 8 < nbytes) {\n      str += \"0\";\n    }\n    const buffer = new ArrayBuffer(nbytes);\n    const uint8 = new Uint8Array(buffer);\n    for (let i = 0; i < nbytes; i++) {\n      uint8[i] = parseInt(str.substr(8 * i, 8 * (i + 1)), 2);\n    }\n    return uint8;\n  }\n  /** https://gist.github.com/Manouchehri/f4b41c8272db2d6423fa987e844dd9ac */\n  static parseFloatingPointFormat(\n    bytes: Uint8Array,\n    ebits: number,\n    fbits: number\n  ): number | undefined {\n    // Bytes to bits\n    const bits = [];\n    for (let i = bytes.length; i; i -= 1) {\n      let byte = bytes[i - 1];\n      for (let j = 8; j; j -= 1) {\n        bits.push(byte % 2 ? 1 : 0);\n        byte = byte >> 1;\n      }\n    }\n    bits.reverse();\n    const str = bits.join(\"\");\n    // Unpack sign, exponent, fraction\n    const bias = (1 << (ebits - 1)) - 1;\n    const s = parseInt(str.substring(0, 1), 2) ? -1 : 1;\n    const e = parseInt(str.substring(1, 1 + ebits), 2);\n    const f = parseInt(str.substring(1 + ebits), 2);\n\n    // Produce number\n    if (e === (1 << ebits) - 1) {\n      return f !== 0 ? undefined : s * Infinity;\n    } else if (e > 0) {\n      return s * Math.pow(2, e - bias) * (1 + f / Math.pow(2, fbits));\n    } else if (f !== 0) {\n      return s * Math.pow(2, -(bias - 1)) * (f / Math.pow(2, fbits));\n    } else {\n      return s * 0;\n    }\n  }\n\n  static generate16bit2sComplement(val: number): number {\n    throw new TypeError(\"not implemented yet\" + val);\n  }\n\n  static parse16bit2sComplement(byte1: number, byte2: number): number {\n    const unsigned = (byte1 << 8) | byte2;\n    if (unsigned & 0x8000) {\n      return unsigned | 0xffff0000;\n    } else {\n      return unsigned;\n    }\n  }\n\n  static parse32bit2sComplement(\n    byte1: number,\n    byte2: number,\n    byte3: number,\n    byte4: number\n  ): number {\n    const unsigned = (byte1 << 24) | (byte2 << 16) | (byte3 << 8) | byte4;\n    const s = (unsigned & 0x80000000) >> 31;\n    let res = unsigned & 0xffffffff;\n\n    if (s) {\n      res = (~unsigned & 0xffffffff) + 1;\n      return -1 * res;\n    }\n    return res;\n  }\n\n  /**\n   *\n   * @param {*} data string?\n   * @param {*} offset offset in the data\n   * @returns returns an integer between 0 and 65535 representing the UTF-16 code unit at the given index.\n   */\n  static getByteAt(data: string, offset: number): number {\n    const dataOffset = 0;\n    return data.charCodeAt(offset + dataOffset) & 0xff;\n  }\n\n  static extractPixelValue(\n    offset: number,\n    bytes: Uint8Array,\n    bitpix: number\n  ): number | undefined {\n    let px_val = undefined; // pixel value\n    // let px_val1, px_val2, px_val3, px_val4;\n    if (bitpix == 16) {\n      // 16-bit 2's complement binary integer\n      px_val = ParseUtils.parse16bit2sComplement(\n        bytes[offset],\n        bytes[offset + 1]\n      );\n    } else if (bitpix == 32) {\n      // IEEE 754 half precision (float16) ??\n      px_val = ParseUtils.parse32bit2sComplement(\n        bytes[offset],\n        bytes[offset + 1],\n        bytes[offset + 2],\n        bytes[offset + 3]\n      );\n    } else if (bitpix == -32) {\n      // 32-bit IEEE single-precision floating point\n      // px_val = ParseUtils.parse32bitSinglePrecisionFloatingPoint (this._u8data[offset], this._u8data[offset+1], this._u8data[offset+2], this._u8data[offset+3]);\n      px_val = ParseUtils.parseFloatingPointFormat(\n        bytes.slice(offset, offset + 8),\n        8,\n        23\n      );\n    } else if (bitpix == 64) {\n      // 64-bit 2's complement binary integer\n      throw new Error(\n        \"BITPIX=64 -> 64-bit 2's complement binary integer NOT supported yet.\"\n      );\n    } else if (bitpix == -64) {\n      // 64-bit IEEE double-precision floating point\n      //https://babbage.cs.qc.cuny.edu/ieee-754.old/Decimal.html\n      px_val = ParseUtils.parseFloatingPointFormat(\n        bytes.slice(offset, offset + 8),\n        11,\n        52\n      );\n    }\n\n    return px_val;\n  }\n\n}\n\n// export default ParseUtils;\n","import { FITSHeaderItem } from \"./FITSHeaderItem.js\";\n\n/**\n * Summary. (bla bla bla)\n *\n * Description. (bla bla bla)\n *\n * @link   github https://github.com/fab77/FITSParser\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n */\n\n// reference FTIS standard doc https://heasarc.gsfc.nasa.gov/docs/fcg/standard_dict.html\n\nexport class FITSHeader extends Map {\n  _offset: number | undefined;\n  _items: FITSHeaderItem[];\n\n  constructor() {\n    super();\n    this._offset = undefined;\n    this._items = [];\n  }\n\n  set offset(offset) {\n    this._offset = offset;\n  }\n\n  get offset() {\n    return this._offset;\n  }\n\n  getItemList() {\n    return this._items;\n  }\n\n  getItemListOf(key: string) {\n    const res = [];\n    for (let i = 0; i < this._items.length; i++) {\n      const item = this._items[i];\n      if (item.key == key) {\n        res.push(item);\n      }\n    }\n    return res;\n  }\n\n  addItemAtTheBeginning(item: FITSHeaderItem) {\n    if (item.key !== undefined) {\n      if (\n        [\n          \"SIMPLE\",\n          \"BITPIX\",\n          \"NAXIS\",\n          \"NAXIS1\",\n          \"NAXIS2\",\n          \"BLANK\",\n          \"BZERO\",\n          \"BSCALE\",\n          \"DATAMIN\",\n          \"DATAMAX\",\n          \"NPIX\",\n          \"ORDER\",\n          \"CRPIX1\",\n          \"CRPIX2\",\n          \"CDELT1\",\n          \"CDELT2\",\n        ].includes(item.key)\n      ) {\n        this.set(item.key, item.value);\n      }\n    }\n    \n    const newitemlist = [item].concat(this._items);\n    this._items = newitemlist;\n  }\n\n\n\n  addItem(item: FITSHeaderItem) {\n    if (item.key !== undefined) {\n      if (\n        [\n          \"SIMPLE\",\n          \"BITPIX\",\n          \"NAXIS\",\n          \"NAXIS1\",\n          \"NAXIS2\",\n          \"BLANK\",\n          \"BZERO\",\n          \"BSCALE\",\n          \"DATAMIN\",\n          \"DATAMAX\",\n          \"NPIX\",\n          \"ORDER\",\n          \"CRPIX1\",\n          \"CRPIX2\",\n          \"CDELT1\",\n          \"CDELT2\",\n        ].includes(item.key)\n      ) {\n        this.set(item.key, item.value);\n      }\n    }\n    this._items.push(item);\n  }\n\n  getNumRows() {\n    return this._items.length;\n  }\n}\n","/**\n * Summary. (bla bla bla)\n *\n * Description. (bla bla bla)\n *\n * @link   github https://github.com/fab77/FITSParser\n * @author Fabrizio Giordano <fabriziogiordano77@gmail.com>\n */\n\nexport class FITSHeaderItem {\n  _key: string | undefined;\n  _value: string | number | undefined;\n  _comment: string | undefined;\n\n  constructor(key?: string, value?: string | number, comment?: string) {\n    this._key = key !== undefined ? key : undefined;\n    this._value = value !== undefined ? value : undefined;\n    this._comment = comment !== undefined ? comment : undefined;\n  }\n\n  get key() {\n    return this._key;\n  }\n\n  get comment() {\n    return this._comment;\n  }\n\n  get value() {\n    return this._value;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.js?h=\" + {\"src_getLocalFile_ts\":\"9afec65ea2038faa319b\",\"vendors-node_modules_cross-fetch_dist_browser-ponyfill_js\":\"5a425c3391776f7feb23\",\"src_getFile_ts\":\"2feb2813035f192d10da\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"jsfitsio:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"jsfitsio\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkjsfitsio\"] = self[\"webpackChunkjsfitsio\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export { FITSHeaderItem } from \"./model/FITSHeaderItem.js\";\nexport { FITSHeader } from \"./model/FITSHeader.js\";\nimport type { FITSHeaderLine } from \"./model/FITSHeaderLine.js\";\nexport type { FITSHeaderLine };\nimport type { FITSParsed } from \"./model/FITSParsed.js\";\nexport type { FITSParsed };\nexport { FITSParser } from \"./FITSParser.js\";\nexport { FITSWriter } from \"./FITSWriter.js\";\nexport { ParseHeader } from \"./ParseHeader.js\";\nexport { ParsePayload } from \"./ParsePayload.js\";\nexport { ParseUtils } from \"./ParseUtils.js\";\n"],"names":[],"sourceRoot":""}